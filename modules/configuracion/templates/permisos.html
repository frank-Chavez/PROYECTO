{% extends "configuracion.html" %} {% block options %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Permisos</title>
    <link
      rel="stylesheet"
      href="{{ url_for('configuracion.static', filename='permisos.css') }}"
    />
  </head>
  <body>
    {% for p in permisos %}
    <div class="cont">
      <div class="cont-permisos">
        <!-- nombre del usuario y su rol -->
        <div class="cont-titulo">
          <div class="nombre-u">
            <h3 class="nombre-usuario">{{ p['nombre_u'] }}</h3>
          </div>
          <span class="rol-usuario">
            {{ 'Admin' if p['rol_id'] == 1 else 'Usuario' }}
          </span>
        </div>

        <!-- bloque de permisos -->
        <form
          method="post"
          action="{{ url_for('configuracion.guardar_permisos') }}"
        >
          <input
            type="hidden"
            name="usuario_id"
            value="{{ p['id_usuario'] }}"
          />
          <div class="cont-per">
            <label class="cont-permisos-opciones">
              <div class="opciones" id="usuario-{{ p['id_usuario'] }}">
                <h5>Ver Registros</h5>
                <input class="check" type="checkbox" name="ver_registros" {% if
                p['ver_registros'] %}checked{% endif %} />
              </div>
            </label>

            <label class="cont-permisos-opciones">
              <div class="opciones" id="usuario-{{ p['id_usuario'] }}">
                <h5>Crear Registros</h5>
                <input class="check" type="checkbox" name="crear_registros" {%
                if p['crear_registros'] %}checked{% endif %} />
              </div>
            </label>

            <label class="cont-permisos-opciones">
              <div class="opciones" id="usuario-{{ p['id_usuario'] }}">
                <h5>Editar Registros</h5>
                <input class="check" type="checkbox" name="editar_registros" {%
                if p['editar_registros'] %}checked{% endif %} />
              </div>
            </label>

            <label class="cont-permisos-opciones">
              <div class="opciones" id="usuario-{{ p['id_usuario'] }}">
                <h5>Eliminar Registros</h5>
                <input class="check" type="checkbox" name="eliminar_registros"
                {% if p['eliminar_registros'] %}checked{% endif %} />
              </div>
            </label>

            <label class="cont-permisos-opciones">
              <div class="opciones" id="usuario-{{ p['id_usuario'] }}">
                <h5>Exportar Datos</h5>
                <input class="check" type="checkbox" name="exportar_datos" {% if
                p['exportar_datos'] %}checked{% endif %} />
              </div>
            </label>
            {% if p['id_usuario'] != session['id_usuario'] %}
            <label class="cont-permisos-opciones">
              <div class="opciones" id="usuario-{{ p['id_usuario'] }}">
                <h5>Administrar Sistema</h5>
                <input class="check" type="checkbox" name="administrar_sistema"
                {% if p['administrar_sistema'] == 1 or p['administrar_sistema']
                == '1' %}checked{% endif %} />
              </div>
            </label>
            {% endif %}
          </div>

          <div class="contenedor-boton">
            <button class="boton-guardar" type="submit">Guardar</button>
          </div>
        </form>
      </div>
    </div>
    {% endfor %}
  </body>
</html>
{% endblock %}

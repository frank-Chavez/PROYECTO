<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{{title}}</title>
    <link
      rel="stylesheet"
      href="{{url_for('proveedor.static', filename='proveedores.css')}}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='styles.css') }}"
    />
  </head>
  <body>
    {% extends "dashboar.html" %} {% block content %}
    <section class="opciones">
      <h1>{{title}}</h1>
      <div class="opciones_bt">
        <div class="content-buscar">
          <form
            name="formSearch"
            method="post"
            action="{{url_for('proveedor.buscador')}}"
            class="cont_busc"
          >
            <input
              type="search"
              name="buscar"
              class="buscar"
              placeholder="Buscar {{title}}..."
            />
            <button type="submit" class="btn_buscar">
              <img src="/static/icons/buscar.svg" alt="Buscar" />
            </button>
          </form>
        </div>
        {% if session.get("permisos", {}).get("crear_registros") %}
        <a href="{{ url_for('proveedor.agregar') }}" class="agregar">
          <img
            class="ico_agregar"
            src="/static/icons/servicios.svg"
            alt="Agregar"
          />Agregar
        </a>
        {% else %}
        <a href="javascript:void(0);" onclick="sinPermiso()" class="agregar">
          <img
            class="ico_agregar"
            src="/static/icons/servicios.svg"
            alt="Agregar"
            style="opacity: 0.5; cursor: not-allowed"
          />Agregar
        </a>
        {% endif %} {% if session.get("permisos", {}).get("exportar_datos") %}
        <a href="{{url_for('proveedor.exel')}}" class="descargar"
          ><img src="/static/icons/descargar.svg" alt="descargar" />EXCEL</a
        >
        {% else %}
        <a href="javascript:void(0);" onclick="sinPermiso()" class="descargar"
          ><img
            src="/static/icons/descargar.svg"
            alt="descargar"
            style="opacity: 0.5; cursor: not-allowed"
          />EXCEL</a
        >
        {% endif %}
      </div>
    </section>
    <section class="tabla">
      <div class="titulo">
        <p>Nombre Proveedor</p>
        <p>Telefono</p>
        <p>Servicio</p>
        <p>Estado</p>
        <p>Acciones</p>
      </div>
      {% for f in proveedor %}
      <div class="contenido">
        <p>{{ f['nombre_p'] }}</p>
        <p>{{ f['telefono_p'] }}</p>
        <p>{{ f['servicio_p'] }}</p>
        <p>
          <td>
            <span
              class="{{ 'text-green' if f['estado_p'] == 1 else 'text-red' }}"
            >
              {{ 'Activo' if f['estado_p'] == 1 else 'Inactivo' }}
            </span>
          </td>
        </p>
        <div class="acciones">
          {% if session.get("permisos", {}).get("editar_registros") %}
          <a href="{{ url_for('proveedor.editar', id=f['id_proveedor']) }}"
            ><img src="/static/icons/editar.svg" alt="editar"
          /></a>
          {% else %}
          <a href="javascript:void(0);" onclick="sinPermiso()">
            <img
              src="/static/icons/editar.svg"
              alt="editar"
              style="opacity: 0.5; cursor: not-allowed"
            />
          </a>
          {% endif %} {% if session.get("permisos", {}).get("ver_registros") %}
          <a href="{{ url_for('proveedor.VerDetalles', id=f['id_proveedor']) }}"
            ><img src="/static/icons/ver.svg" alt="cambiar estado"
          /></a>
          {% else %}
          <a href="javascript:void(0);" onclick="sinPermiso()">
            <img
              src="/static/icons/ver.svg"
              alt="ver detalles"
              style="opacity: 0.5; cursor: not-allowed"
            />
          </a>
          {% endif %} {% if session.get("permisos",
          {}).get("eliminar_registros")%}
          <a
            href="{{ url_for('proveedor.cambiar_estado', id=f['id_proveedor']) }}"
            onclick="return confirm('Â¿Seguro que deseas cambiar el estado de este registro?')"
            ><img src="/static/icons/borrar.svg" alt="cambiar estado"
          /></a>
          {% else %}
          <a href="javascript:void(0);" onclick="sinPermiso()">
            <img
              src="/static/icons/borrar.svg"
              alt="cambiar estado"
              style="opacity: 0.5; cursor: not-allowed"
            />
          </a>
          {% endif %}
        </div>
      </div>
      {% endfor %}
    </section>
    <div class="table-footer">
      <p>{{ total }} registrados</p>
      <div class="pagination">
        {% if page > 1 %}
        <a
          href="{{ url_for('proveedor.listar', page=page-1) }}"
          class="nav-btn"
        >
          <img
            src="/static/icons/derecha.svg"
            alt="Anterior"
            class="arrow-icon left"
          />
        </a>
        {% endif %}

        <span>
          {{ (page * per_page) if (page * per_page) < total else total }} de {{
          total }}
        </span>

        {% if page < total_pages %}
        <a
          href="{{ url_for('proveedor.listar', page=page+1) }}"
          class="nav-btn"
        >
          <img
            src="/static/icons/derecha.svg"
            alt="Siguiente"
            class="arrow-icon right"
          />
        </a>
        {% endif %}
      </div>
    </div>
    {% endblock %}
  </body>
</html>

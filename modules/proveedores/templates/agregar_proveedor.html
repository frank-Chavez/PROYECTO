<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Agregar {{title}}</title>
    <link
      rel="stylesheet"
      href="{{url_for('proveedor.static', filename='agregar_proveedor.css')}}"
    />
  </head>
  <body>
    {% extends "dashboar.html" %} {% block content %}
    <div class="contenedor-principal">
      <!-- Encabezado -->
      <div class="encabezado-pagina">
        <div class="contenido-encabezado">
          <h1 class="titulo-principal">Agregar {{title}}</h1>
          <p class="subtitulo-pagina">
            Complete los campos requeridos para registrar el servicio
          </p>
        </div>
      </div>

      <!-- Cuerpo -->
      <div class="cuerpo-pagina">
        <div class="contenedor-formulario">
          <form method="POST">
            <div class="contenido-formulario">
              <!-- Sección: Información del Servicio -->
              <div class="seccion-formulario">
                <div class="encabezado-seccion">
                  <div class="titulo-seccion">Información del Servicio</div>
                </div>
                <div class="grilla-campos">
                  <div class="campo-formulario doble">
                    <label class="etiqueta-campo" for="nombre">
                      Nombre <span class="asterisco-requerido">*</span>
                    </label>
                    <input
                      type="text"
                      id="nombre"
                      name="nombre"
                      class="input-texto"
                      placeholder="Ingrese el nombre del servicio"
                      required
                    />
                  </div>

                  <div class="campo-formulario">
                    <label class="etiqueta-campo" for="servicio">
                      Servicio <span class="asterisco-requerido">*</span>
                    </label>
                    <input
                      type="text"
                      id="servicio"
                      name="servicio"
                      class="input-texto"
                      placeholder="Tipo de servicio"
                      required
                    />
                  </div>
                </div>
              </div>

              <!-- Sección: Información de Contacto -->
              <div class="seccion-formulario">
                <div class="encabezado-seccion">
                  <div class="titulo-seccion">Información de Contacto</div>
                </div>
                <div class="grilla-campos">
                  <div class="campo-formulario">
                    <label class="etiqueta-campo">Teléfono</label>
                    <div class="telefono-con-codigo">
                      <input
                        type="text"
                        name="codigo_pais"
                        id="codigo_pais"
                        value="+51"
                        class="codigo-pais-editable"
                        list="codigos-populares"
                        placeholder="+51"
                      />
                      <datalist id="codigos-populares">
                        <option value="+51">Perú</option>
                        <option value="+58">Venezuela</option>
                        <option value="+57">Colombia</option>
                        <option value="+54">Argentina</option>
                        <option value="+56">Chile</option>
                        <option value="+52">México</option>
                        <option value="+34">España</option>
                        <option value="+1">EE.UU / Canadá</option>
                        <option value="+55">Brasil</option>
                        <option value="+591">Bolivia</option>
                        <option value="+593">Ecuador</option>
                        <option value="+595">Paraguay</option>
                        <option value="+598">Uruguay</option>
                      </datalist>

                      <input
                        type="text"
                        name="telefono"
                        class="input-texto telefono-numero"
                        placeholder="912 345 678"
                        required
                        pattern="[0-9\s]{7,15}"
                        title="Solo números y espacios"
                      />
                    </div>
                  </div>

                  <div class="campo-formulario doble">
                    <label class="etiqueta-campo" for="correo">
                      Correo Electrónico
                      <span class="asterisco-requerido">*</span>
                    </label>
                    <input
                      type="email"
                      id="correo"
                      name="correo"
                      class="input-email"
                      placeholder="ejemplo@correo.com"
                      required
                    />
                  </div>
                </div>
              </div>

              <!-- Sección: Información Adicional -->
              <div class="seccion-formulario">
                <div class="encabezado-seccion">
                  <div class="titulo-seccion">Información Adicional</div>
                </div>
                <div class="grilla-campos">
                  <div class="campo-formulario">
                    <label class="etiqueta-campo" for="fechaRegistro">
                      Fecha de Registro
                      <span class="asterisco-requerido">*</span>
                    </label>
                    <input
                      type="date"
                      id="fechaRegistro"
                      name="fechaRegistro"
                      class="input-fecha"
                      id="fechaRegistro"
                      required
                    />
                  </div>

                  <div class="campo-formulario">
                    <label class="etiqueta-campo" for="estado">
                      Estado <span class="asterisco-requerido">*</span>
                    </label>
                    <select
                      id="estado"
                      name="estado"
                      class="select-opciones"
                      required
                    >
                      <option value="1">Activo</option>
                      <option value="0">Inactivo</option>
                    </select>
                  </div>
                </div>
              </div>
            </div>

            <!-- Pie de formulario con botones -->
            <div class="pie-formulario">
              <button
                type="button"
                class="boton-accion boton-cancelar"
                onclick="history.back()"
              >
                Cancelar
              </button>
              <button type="submit" class="boton-accion boton-guardar">
                Guardar
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </body>
  <script>
    document.getElementById('fechaRegistro').value = new Date()
      .toISOString()
      .split('T')[0];
    document.addEventListener('DOMContentDOMContentLoaded', function () {
      const codigo = document.getElementById('codigo_pais');

      // Al perder foco, si está vacío o no tiene +, poner +51
      codigo.addEventListener('blur', function () {
        if (!this.value.trim() || !this.value.startsWith('+')) {
          this.value = '+51';
        }
      });

      // Mientras escribe, forzar que empiece con +
      codigo.addEventListener('input', function () {
        let val = this.value.trim();
        if (val && !val.startsWith('+')) {
          this.value = '+' + val.replace(/[^\d+]/g, '');
        }
      });
    });
  </script>
  {% endblock %}
</html>
